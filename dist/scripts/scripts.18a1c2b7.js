"use strict";angular.module("scheduler",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngStorage","ui.calendar","ui.router","satellizer","ui.bootstrap","ui.select","ngFlash","isteven-multi-select"]).constant("Config",{apiBase:"localhost"===document.domain?"//localhost:8000/api":"//api.appointment-scheduler.dev/api"}).config(["$routeProvider","$httpProvider","$authProvider","$provide","Config","FlashProvider",function(a,b,c,d,e,f){b.defaults.useXDomain=!0,b.defaults.paramSerializer="$httpParamSerializerJQLike",delete b.defaults.headers.common["X-Requested-With"],c.loginUrl=e.apiBase+"/authenticate",c.signupUrl=e.apiBase+"/register",c.httpInterceptor=!0,f.setTimeout(5e3),a.when("/",{templateUrl:"views/calendar.html",controller:"AppointmentCtrl",controllerAs:"appointment"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl"}).when("/login",{templateUrl:"views/auth.html",controller:"AuthCtrl",controllerAs:"auth"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/scheduler",{templateUrl:"views/scheduler.html",controller:"AppointmentCtrl",controllerAs:"appointment"}).when("/employees",{templateUrl:"views/emps.html",controller:"EmployeeCtrl"}).when("/employees/add",{templateUrl:"views/addEmp.html",controller:"EmployeeCtrl"}).when("/employees/:empId/edit",{templateUrl:"views/editEmp.html",controller:"EmployeeDetailCtrl"}).when("/scheduler/appointment/:apptId/details",{templateUrl:"views/appointmentDetails.html",controller:"AppointmentDetailsCtrl",controllerAs:"appointment-details"}).when("/scheduler/appointment/:apptId/edit",{templateUrl:"views/editAppointment.html",controller:"AppointmentDetailsCtrl"}).when("/scheduler/appointments",{templateUrl:"views/appointments.html",controller:"AppointmentListCtrl"}).when("/scheduler/appointments/my-appointments",{templateUrl:"views/myappointments.html",controller:"AppointmentInvitationsCtrl"}).when("/scheduler/appointments/scheduling-transactions",{templateUrl:"views/transactions.html",controller:"TransactionCtrl"}).when("/scheduler/appointments/my-appointments/scheduled",{templateUrl:"views/scheduledAppointments.html",controller:"AppointmentInvitationsCtrl"}).when("/scheduler/appointments/my-appointments/pending",{templateUrl:"views/pendingAppointments.html",controller:"AppointmentInvitationsCtrl"}).when("/scheduler/appointments/my-appointments/approved",{templateUrl:"views/approvedAppointments.html",controller:"AppointmentInvitationsCtrl"}).when("/scheduler/appointments/my-appointments/requested",{templateUrl:"views/requestedAppointments.html",controller:"AppointmentInvitationsCtrl"}).when("/scheduler/appointments/my-appointments/cancelled",{templateUrl:"views/cancelledAppointments.html",controller:"AppointmentInvitationsCtrl"}).otherwise({redirectTo:"/"}),b.interceptors.push(["Flash","$q","$rootScope","$location",function(a,b,c,d){return{request:function(a){a.headers=a.headers||{};var b=localStorage.getItem("satellizer_token");return b&&(a.headers.Authorization="Bearer "+b),a},responseError:function(a){return 401!==a.status&&403!==a.status&&400!==a.status||(localStorage.removeItem("satellizer_token"),localStorage.removeItem("user"),c.authenticated=!1,d.path("/login")),b.reject(a)}}}])}]).run(["$rootScope","$auth","$location","$route",function(a,b,c,d){a.$on("$locationChangeStart",function(){if(void 0===a.authenticated){var b=localStorage.getItem("satellizer_token");b?(a.authenticated=!0,d.reload()):(a.authenticated=!1,c.path("/login"))}})}]),angular.module("scheduler").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("scheduler").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("scheduler").controller("AuthCtrl",["$auth","$route","$scope","$location","Config","Flash","$http","$rootScope",function(a,b,c,d,e,f,g,h){var i=e.apiBase+"/authenticate/user";c.loginData={emp_num:"",password:""},c.loginError=!1,h.login=function(){var b={emp_num:c.loginData.emp_num,password:c.loginData.password};a.login(b).then(function(){return g({method:"GET",url:i,headers:{Authorization:"Bearer "+a.getToken()}}).then(function(a){var b=JSON.stringify(a.data.user);localStorage.setItem("user",b),h.authenticated=!0,h.currentUser=a.data.user,d.path("/")})},function(a){var b,c=a.data.error;"invalid_credentials"===c&&(b="Invalid Credentials"),f.create("danger",b)})}}]).run(["$rootScope","$auth","$location",function(a,b,c){var d=JSON.parse(window.localStorage.getItem("user"));d&&(a.currentUser=d),a.logout=function(){console.log("logout clicked"),b.logout().then(function(){localStorage.removeItem("user"),a.authenticated=!1,a.currentUser=null,c.path("/login")})}}]),angular.module("scheduler").controller("RegisterCtrl",["$route","$auth","$scope","$rootScope","Config","Flash","$http","$location",function(a,b,c,d,e,f,g,h){c.register=function(){if(c.user.password===c.user.password_confirmation)b.signup({emp_num:c.user.emp_num,password:c.user.password}).then(function(a){var b=JSON.stringify(a.data.token),c=JSON.stringify(a.data.user);localStorage.setItem("satellizer_token",b),localStorage.setItem("user",c),d.authenticated=!0,d.currentUser=localStorage.getItem("user"),h.path("/")},function(a){var b;b=500===a.status?"Account already exists!":"Invalid employee number!",f.create("danger",b)});else{var a="Password do not match!";f.create("danger",a)}}}]),angular.module("scheduler").controller("AppointmentCtrl",["$rootScope","$filter","$location","$route","$scope","Flash","Employee","Department","Appointment",function(a,b,c,d,e,f,g,h,i){a.authenticated||c.path("/login"),e.formatTime=function(a){var b=a.split(":");return new Date(1970,0,1,b[0],b[1],b[2])},e.set_date=new Date,e.start_time=new Date(1970,0,1,6,0,0),e.end_time=new Date(1970,0,1,6,0,0),e.uiConfig={calendar:{editable:!0,header:{left:"month basicWeek basicDay agendaWeek agendaDay",center:"title",right:"today prev,next"},dayClick:e.alertEventOnClick,eventDrop:e.alertOnDrop,eventResize:e.alertOnResize,timeFormat:"HH:mm A",ignoreTimezone:!1}};var j=JSON.parse(window.localStorage.getItem("user"));e.user=j,e.eventSources=[],g.all().then(function(a){var b=[],c=a.data;angular.forEach(c,function(a){a.id!==e.user.id&&(1!==a.level.id&&2!==a.level.id||b.push(a))}),e.employees=b}),i.all().then(function(a){var b=a.data;e.appointments=[],e.appointments=b,e.events=[],angular.forEach(b,function(a){var b={title:a.subject,date:a.set_date,start:a.set_date+" "+a.start_time,start_time:a.start_time,end_time:a.end_time,purpose:a.purpose,url:"#/scheduler/appointment/"+a.id+"/details",allDay:!1};e.events.push(b)}),e.eventSources.push(e.events)}),e.agendas=[],e.animationsEnabled=!0,e.addAgenda=function(){var a=e.agenda.description;e.agenda={description:a};var b=JSON.stringify(e.agendas.concat(e.agenda));localStorage.setItem("agendas",b),e.agendas=JSON.parse(window.localStorage.getItem("agendas"))},e.removeAgenda=function(a){var b=JSON.parse(window.localStorage.getItem("agendas"));b.splice(a,1),b=JSON.stringify(b),localStorage.setItem("agendas",b),e.agendas=JSON.parse(window.localStorage.getItem("agendas"))},e.schedule=function(){var a=[];if(a.subject=e.subject,a.employees=e.selectedEmps.concat(e.user),a.set_date=b("date")(e.set_date,"yyyy-MM-dd","UTC+08:00"),a.start_time=b("date")(e.start_time,"hh:mm a","UTC+08:00"),a.end_time=b("date")(e.end_time,"hh:mm a","UTC+08:00"),a.set_by=e.user.id,a.purpose=e.purpose,a.agendas=e.agendas,a.status="Scheduled",a.invitation_status="Pending",a.venue=e.venue,a.notes=e.notes,console.log(a.employees),e.appointments.length>0){var g=[];if(angular.forEach(e.appointments,function(c){if(c.set_date===a.set_date){var d=function(a){var b=a.split(":");return new Date(1970,0,1,b[0],b[1],b[2])},e=d(c.start_time),f=d(c.end_time),h=b("date")(e,"hh:mm a","UTC+08:00"),i=b("date")(f,"hh:mm a","UTC+08:00");h===a.start_time&&g.push(c),a.start_time<i&&a.start_time>h&&g.push(c),a.end_time>h&&a.end_time<i&&g.push(c),h>a.start_time&&i<a.end_time&&g.push(c),a.start_time<h&&a.end_time>=i&&g.push(c)}}),console.log(g.length),g.length>0){var h="Warning: Time not available!";f.create("danger",h),console.log("Time not available")}else i.create(a).then(function(){d.reload()})}else i.create(a).then(function(){c.path("/calendar")})}}]),angular.module("scheduler").controller("AppointmentDetailsCtrl",["Appointment","AppointmentStatus","Flash","Employee","PersonnelAppointment","Department","$rootScope","$scope","$routeParams","$filter","$uibModal","$location",function(a,b,c,d,e,f,g,h,i,j,k,l){g.authenticated||l.path("/login");var m=JSON.parse(window.localStorage.getItem("user"));a.all().then(function(a){h.appointments=a.data}),a.find(i.apptId).then(function(f){var g=JSON.parse(window.localStorage.getItem("user"));h.user=g;var i=function(a){var b=a.split(":");return new Date(1970,0,1,b[0],b[1],b[2])};h.appointment=f.data,h.formattedDate=new Date(f.data.set_date),h.formattedStartTime=i(f.data.start_time),h.formattedEndTime=i(f.data.end_time),h.date=j("date")(h.formattedDate,"MMMM d, yyyy","UTC+08:00"),h.start=j("date")(h.formattedStartTime,"HH:mm a","UTC+08:00"),h.end=j("date")(h.formattedEndTime,"HH:mm a","UTC+08:00");var k=JSON.stringify(h.appointment.agendas);localStorage.setItem("agendas",k),h.agendas=JSON.parse(window.localStorage.getItem("agendas"));var n=JSON.stringify(h.appointment.employees);localStorage.setItem("selectedEmps",n),h.selectedEmps=JSON.parse(window.localStorage.getItem("selectedEmps")),d.all().then(function(a){var b=a.data;h.employees=b}),h.emp_stats=[],angular.forEach(h.appointment.employees,function(a){var b=a;e.getEmpAppointment(b.id).then(function(a){var c=a.data;angular.forEach(c,function(a){var c;if(c=h.appointment.employee.id==a.pivot.employee_id?"Attendance Confirmed":""===a.pivot.status?"Pending Approval":a.pivot.status,console.log(a.pivot.appointment_id==h.appointment.id),a.pivot.appointment_id==h.appointment.id){var d={first_name:b.first_name,last_name:b.last_name,status:c};h.emp_stats.push(d)}a.employee_id!==g.id&&a.pivot.employee_id==g.id&&a.pivot.appointment_id==h.appointment.id&&(""===a.pivot.status?h.isPending=!0:"Attendance Confirmed"==a.pivot.status?h.isApproved=!0:"Attendance Cancelled"==a.pivot.status&&(h.isCancelledAttendance=!0)),a.employee_id===g.id&&"Cancelled"===a.status&&(h.isCancelled=!0)})})}),h.animationsEnabled=!0,h.syncEmps=function(){var a=JSON.stringify(h.selectedEmps);localStorage.setItem("selectedEmps",a),h.selectedEmps=JSON.parse(window.localStorage.getItem("selectedEmps"))},h.addAgenda=function(){var a=h.agenda.description;h.agenda={description:a};var b=JSON.stringify(h.agendas.concat(h.agenda));localStorage.setItem("agendas",b),h.agendas=JSON.parse(window.localStorage.getItem("agendas"))},h.removeAgenda=function(a){var b=JSON.parse(window.localStorage.getItem("agendas"));b.splice(a,1),b=JSON.stringify(b),localStorage.setItem("agendas",b),h.agendas=JSON.parse(window.localStorage.getItem("agendas"))},h.confirmAttendance=function(a){var c=[];c.appointment_id=a.id,c.employee_id=m.id,c.status="Attendance Confirmed",b.update(c).then(function(){l.path("/scheduler/appointments/my-appointments/approved")})},h.cancelAttendance=function(a){var c=[];c.appointment_id=a.id,c.employee_id=m.id,c.status="Attendance Cancelled",b.update(c).then(function(){l.path("/scheduler/appointments/my-appointments/approved")})},h.notAvailable=function(a){var c=window.prompt("Please state your reasons:"),d=[];d.appointment_id=a.id,d.employee_id=m.id,d.status="Not Available",d.notes=c,b.update(d).then(function(){l.path("/scheduler/appointments/my-appointments/pending")})},h.cancelAppointment=function(b){var c=window.prompt("Please state your reasons:"),d=[];d.id=b.id,d.subject=b.subject,d.set_date=b.set_date,d.start_time=b.start_time,d.end_time=b.end_time,d.set_by=b.employee_id,d.purpose=b.purpose,d.employees=b.employees,d.agendas=b.agendas,d.status="Cancelled",d.venue=b.venue,d.notes=c,a.patch(d).then(function(){l.path("/scheduler/appointments/my-appointments/cancelled")})},h.reSched=function(b){var c=window.prompt("Please state your reasons:"),d=[];d.id=b.id,d.subject=b.subject,d.set_date=b.set_date,d.start_time=b.start_time,d.end_time=b.end_time,d.set_by=b.employee_id,d.purpose=b.purpose,d.employees=b.employees,d.agendas=b.agendas,d.status="Re-scheduled",d.invitation_status=b.invitation_status,d.venue=b.venue,d.notes=c,a.patch(d).then(function(){l.path("/scheduler/appointments/my-appointments/requested")})},h.update=function(){var b=[];if(b.id=h.appointment.id,b.subject=h.appointment.subject,b.employees=h.selectedEmps.concat(h.user),b.set_date=j("date")(h.formattedDate,"yyyy-MM-dd","UTC+08:00"),b.start_time=j("date")(h.formattedStartTime,"HH:mm a","UTC+08:00"),b.end_time=j("date")(h.formattedEndTime,"HH:mm a","UTC+08:00"),b.set_by=h.appointment.employee_id,b.purpose=h.appointment.purpose,b.agendas=h.agendas,b.venue=h.appointment.venue,b.status=h.appointment.status,b.notes=h.appointment.notes,h.appointments.length>0){var d=[];if(angular.forEach(h.appointments,function(a){if(a.set_date===b.set_date){var c=function(a){var b=a.split(":");return new Date(1970,0,1,b[0],b[1],b[2])},e=c(a.start_time),f=c(a.end_time),g=j("date")(e,"HH:mm a","UTC+08:00"),h=j("date")(f,"HH:mm a","UTC+08:00");g===b.start_time&&a.id!==b.id&&d.push(a),b.start_time<h&&g<b.start_time&&d.push(a),b.end_time>g&&b.end_time<h&&d.push(a)}}),d.length>0){var e="Warning: Time not available!";c.create("danger",e,0,!0)}else a.patch(b).then(function(){l.path("/scheduler/appointment/"+h.appointment.id+"/details")})}else a.patch(b).then(function(){l.path("/scheduler/appointment/"+h.appointment.id+"/details")})}})}]),angular.module("scheduler").controller("AppointmentListCtrl",["$scope","$filter","$location","$rootScope","Appointment",function(a,b,c,d,e){d.authenticated||c.path("/login"),a.currentDate=new Date,a.appointments=[],a.presentAppointments=[],a.formatTime=function(a){var b=a.split(":");return new Date(1970,0,1,b[0],b[1],b[2])},e.all().then(function(c){var d=c.data;angular.forEach(d,function(c){var d=[],e=c,f=e.employees;angular.forEach(e.employees,function(a){("Attendance Confirmed"===a.pivot.status||""===a.pivot.status&&a.employeeId===a.pivot.employee_id)&&d.push(a)}),f.length===d.length+1&&"Cancelled"!=e.status&&(e.set_date===b("date")(a.currentDate,"yyyy-MM-dd","UTC+08:00")?a.presentAppointments.push(e):a.appointments.push(e))})})}]),angular.module("scheduler").controller("AppointmentInvitationsCtrl",["$scope","$rootScope","Appointment","AppointmentStatus","PersonnelAppointment","Employee","$location",function(a,b,c,d,e,f,g){b.authenticated||g.path("/login");var h=JSON.parse(window.localStorage.getItem("user"));a.pendingInvitations=[],a.approvedAppointments=[],a.cancelledAppointments=[],a.cancelledApproval=[],a.scheduledAppointments=[],a.requests=[],a.formatTime=function(a){var b=a.split(":");return new Date(1970,0,1,b[0],b[1],b[2])},c.all().then(function(b){var c=b.data;angular.forEach(c,function(b){b.employee_id===h.id&&a.requests.push(b)}),a.requestsCount=a.requests.length}),e.getEmpAppointment(h.id).then(function(b){var c=b.data;angular.forEach(c,function(b){console.log(b),b.employee_id!==h.id&&(""===b.pivot.status?a.pendingInvitations.push(b):"Attendance Confirmed"===b.pivot.status?a.approvedAppointments.push(b):"Attendance Cancelled"===b.pivot.status&&a.cancelledApproval.push(b))}),a.pendingCount=a.pendingInvitations.length,a.approvedCount=a.approvedAppointments.length,a.cancelledApprovalCount=a.cancelledApproval.length}),c.all().then(function(b){var c=[],d=b.data;angular.forEach(d,function(b){var d=[],e=b,f=e.employees;angular.forEach(e.employees,function(a){("Attendance Confirmed"===a.pivot.status||""===a.pivot.status&&a.employeeId===a.pivot.employee_id)&&d.push(a)}),f.length===d.length+1&&c.push(e),"Cancelled"===e.status&&a.cancelledAppointments.push(e)}),angular.forEach(c,function(b){var c=b;angular.forEach(c.employees,function(b){b.id===h.id&&"Cancelled"!=c.status&&a.scheduledAppointments.push(c)})}),a.scheduledCount=a.scheduledAppointments.length,a.cancelledCount=a.cancelledAppointments.length}),a.getEmp=function(b){f.all().then(function(c){var d=c.data;angular.forEach(d,function(c){c.id===b&&(a.employee=c)})})},a.getEmps=function(b){c.all().then(function(c){var d=c.data;angular.forEach(d,function(c){c.id===b&&(a.emps=c.employees)})})},a.confirmAttendance=function(a){var b=[];b.appointment_id=a.id,b.employee_id=h.id,b.status="Attendance Confirmed",d.update(b).then(function(){g.path("/scheduler/appointments/my-appointments/approved")})},a.cancelAttendance=function(a){var b=[];b.appointment_id=a.id,b.employee_id=h.id,b.status="Attendance Cancelled",d.update(b).then(function(){g.path("/scheduler/appointments/my-appointments/approved")})},a.notAvailable=function(a){var b=window.prompt("Please state your reasons:"),c=[];c.appointment_id=a.id,c.employee_id=h.id,c.status="Not Available",c.notes=b,d.update(c).then(function(){g.path("/scheduler/appointments/my-appointments/pending")})},a.cancelAppointment=function(a){var b=window.prompt("Please state your reasons:"),d=[];d.id=a.id,d.subject=a.subject,d.set_date=a.set_date,d.start_time=a.start_time,d.end_time=a.end_time,d.set_by=a.employee_id,d.purpose=a.purpose,d.employees=a.employees,d.agendas=a.agendas,d.status="Cancelled",d.invitation_status=a.invitation_status,d.venue=a.venue,d.notes=a.notes,d.reason=b,c.patch(d).then(function(){g.path("/scheduler/appointments/my-appointments/cancelled")})},a.reSched=function(a){var b=[];b.id=a.id,b.subject=a.subject,b.set_date=a.set_date,b.start_time=a.start_time,b.end_time=a.end_time,b.set_by=a.employee_id,b.purpose=a.purpose,b.employees=a.employees,b.agendas=a.agendas,b.status="Re-scheduled",b.invitation_status=a.invitation_status,b.venue=a.venue,b.notes=a.notes,c.patch(b).then(function(){g.path("/scheduler/appointments/my-appointments/requested")})}}]),angular.module("scheduler").controller("TransactionCtrl",["Appointment","$rootScope","$scope","$location",function(a,b,c,d){b.authenticated||d.path("/login"),c.formatTime=function(a){var b=a.split(":");return new Date(1970,0,1,b[0],b[1],b[2])},a.all().then(function(a){c.appointments=a.data})}]),angular.module("scheduler").controller("EmployeeCtrl",["Employee","Position","Level","Department","Flash","$scope","$route",function(a,b,c,d,e,f,g){a.all().then(function(a){f.employees=a.data}),d.all().then(function(a){f.departments=a.data}),c.all().then(function(a){f.levels=a.data}),b.all().then(function(a){f.positions=a.data}),f.save=function(){var b=[];b.emp_num=f.emp_num,b.first_name=f.first_name,b.middle_name=f.middle_name,b.last_name=f.last_name,b.suffix=f.suffix,b.email=f.email,b.department_id=f.department.id,b.position_id=f.position.id,b.level_id=f.level.id,a.create(b).then(function(a){var b="Employee record has been successfully added!";e.create("success",b)})},f["delete"]=function(b){a["delete"](b).then(function(a){g.reload()})}}]),angular.module("scheduler").controller("EmployeeDetailCtrl",["$routeParams","Employee","Position","Level","Department","Flash","$scope",function(a,b,c,d,e,f,g){b.find(a.empId).then(function(a){g.emp=a.data,console.log(g.emp),b.all().then(function(a){g.employees=a.data}),e.all().then(function(a){g.departments=a.data,angular.forEach(g.departments,function(a){a.id===g.emp.department.id&&(g.emp.department=a)})}),d.all().then(function(a){g.levels=a.data,angular.forEach(g.levels,function(a){a.id===g.emp.level.id&&(g.emp.level=a)})}),c.all().then(function(a){g.positions=a.data,angular.forEach(g.positions,function(a){a.id===g.emp.position.id&&(g.emp.position=a)})})}),g.update=function(){var a=[];a.id=g.emp.id,a.emp_num=g.emp.emp_num,a.first_name=g.emp.first_name,a.middle_name=g.emp.middle_name,a.last_name=g.emp.last_name,a.suffix=g.emp.suffix,a.email=g.emp.email,a.department_id=g.emp.department.id,a.position_id=g.emp.position.id,a.level_id=g.emp.level.id,b.patch(a).then(function(a){var b="Employee record has been successfully updated!";f.create("success",b)})}}]),angular.module("scheduler").service("Employee",["Config","$http","$auth",function(a,b,c){var d=a.apiBase+"/employees";return{all:function(){return b.get(d)},find:function(a){return b.get(d+"/"+a)},create:function(a){return b({method:"POST",url:d,headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.getToken()},data:{emp_num:a.emp_num,first_name:a.first_name,middle_name:a.middle_name,last_name:a.last_name,suffix:a.suffix,email:a.email,department_id:a.department_id,position_id:a.position_id,level_id:a.level_id}})},patch:function(a){return b({method:"PUT",url:d+"/"+a.id,headers:{"Content-Type":"application/json",Authorization:"Bearer"+c.getToken()},data:{id:a.id,emp_num:a.emp_num,first_name:a.first_name,middle_name:a.middle_name,last_name:a.last_name,suffix:a.suffix,email:a.email,department_id:a.department_id,position_id:a.position_id,level_id:a.level_id}})},"delete":function(a){return b({method:"DELETE",url:d+"/"+a,headers:{"Content-Type":"application/json"}})}}}]),angular.module("scheduler").service("Department",["Config","$http",function(a,b){var c=a.apiBase+"/departments";return{all:function(){return b.get(c)}}}]),angular.module("scheduler").service("Level",["Config","$http",function(a,b){var c=a.apiBase+"/levels";return{all:function(){return b.get(c)}}}]),angular.module("scheduler").service("Position",["Config","$http",function(a,b){var c=a.apiBase+"/positions";return{all:function(){return b.get(c)}}}]),angular.module("scheduler").service("Appointment",["Config","$http","$auth",function(a,b,c){var d=a.apiBase+"/appointments";return{all:function(){return b.get(d)},find:function(a){return b.get(d+"/"+a)},create:function(a){return b({method:"POST",url:d,headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.getToken()},data:{subject:a.subject,set_date:a.set_date,start_time:a.start_time,end_time:a.end_time,set_by:a.set_by,purpose:a.purpose,employees:a.employees,agendas:a.agendas,status:a.status,invitation_status:a.invitation_status,venue:a.venue,notes:a.notes}})},patch:function(a){return b({method:"PUT",url:d+"/"+a.id,headers:{"Content-Type":"application/json",Authorization:"Bearer"+c.getToken()},data:{id:a.id,subject:a.subject,set_date:a.set_date,start_time:a.start_time,end_time:a.end_time,set_by:a.set_by,purpose:a.purpose,employees:a.employees,agendas:a.agendas,status:a.status,venue:a.venue,notes:a.notes,reason:a.reason}})}}}]),angular.module("scheduler").service("AppointmentStatus",["Config","$http","$auth",function(a,b,c){var d=a.apiBase+"/appointment-status";return{all:function(){return b.get(d)},update:function(a){return b({method:"PUT",url:d+"/"+a.appointment_id,headers:{"Content-Type":"application/json",Authorization:"Bearer"+c.getToken()},data:{appointment_id:a.appointment_id,employee_id:a.employee_id,status:a.status,notes:a.notes}})}}}]),angular.module("scheduler").service("PersonnelAppointment",["Config","$http","$auth",function(a,b,c){var d=a.apiBase+"/personnel-appointments";return{getEmpAppointment:function(a){return b({method:"GET",url:d+"/"+a,headers:{"Content-Type":"application/json",Authorization:"Bearer"+c.getToken()}})}}}]),angular.module("scheduler").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/addEmp.html",'<div class="container"> <div class="col-sm-2"></div> <div class="col-sm-8"> <div class="well"> <h4>Add Employee</h4> <flash-message></flash-message> <form class="form-horizontal"> <div class="form-group"> <label class="col-xs-3 control-label">Employee No.</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Employee number" ng-model="emp_num"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">First Name</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="First Name" ng-model="first_name"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Middle Name</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Middle Name" ng-model="middle_name"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Last Name</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Middle Name" ng-model="last_name"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Suffix</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Jr/Sr/I/II/etc" ng-model="suffix"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Email</label> <div class="col-xs-9"> <input type="email" class="form-control" placeholder="Email Address" ng-model="email"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Department</label> <div class="col-xs-9"> <select class="form-control" placeholder="Select Department" ng-options="department as department.name for department in departments track by department.id" ng-model="department"></select> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Level</label> <div class="col-xs-9"> <select class="form-control" placeholder="Select Position Level" ng-options="level as level.description for level in levels track by level.id" ng-model="level"></select> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Position</label> <div class="col-xs-9"> <select class="form-control" placeholder="Select Position" ng-options="position as position.title for position in positions track by position.id" ng-model="position"></select> </div> </div> <div class="form-group"> <div class="col-xs-3"></div> <div class="col-xs-9"> <button class="btn btn-primary pull-right" ng-click="save()"> <span class="fa fa-user"></span> Save </button> </div> </div> </form> </div> </div> <div class="col-sm-2"></div> </div>'),a.put("views/appointmentDetails.html",'<div class="container"> <div class="panel panel-primary"> <!-- Default panel contents --> <div class="panel-heading"> <h3 class="panel-title text-center">{{ appointment.subject }}</h3> </div> <div class="panel-body"> <p><b><span class="fa fa-eye"></span> Purpose:</b> {{ appointment.purpose }}</p> </div> <!-- List group --> <ul class="list-group"> <li class="list-group-item"><label><span class="fa fa-calendar"></span> Date:</label> {{ date }}</li> <li class="list-group-item"><label><span class="fa fa-clock-o"></span> Time:</label> {{ start }} - {{ end }}</li> <li class="list-group-item"><label><span class="fa fa-building-o"></span> Venue:</label> {{ appointment.venue }}</li> </ul> <ul class="list-group"> <li class="list-group-item"><span class="fa fa-list-alt"></span> <label>Agendas:</label></li> <li class="list-group-item" ng-repeat="agenda in agendas"><span class="fa fa-square-o"></span> {{ agenda.description }}</li> </ul> <ul class="list-group"> <li class="list-group-item"><label><span class="fa fa-group"></span> Meeting Personnel:</label></li> <li class="list-group-item" ng-repeat="emp_stat in emp_stats">{{ emp_stat.first_name }} {{ emp_stat.last_name }} <span class="pull-right"><span ng-if="emp_stat.status === \'Attendance Confirmed\'" class="fa fa-check text-success"></span> {{ emp_stat.status }}</span></li> </ul> <ul class="list-group"> <li class="list-group-item"><label><span class="fa fa-institution"></span> Departments:</label></li> <li class="list-group-item" ng-repeat="dept in appointment.departments">{{ dept.name }}</li> </ul> <ul class="list-group"> <li class="list-group-item"><label><span class="fa fa-user"></span> Appointment set by:</label> {{ appointment.employee.first_name }} {{ appointment.employee.last_name }}</li> </ul> <ul class="list-group"> <li class="list-group-item"><label><span class="fa fa-info-circle"></span> Notes:</label> {{ appointment.notes }}</li> </ul> <ul class="list-group"> <li class="list-group-item"><label><span class="fa fa-info-circle"></span> Status:</label> {{ appointment.status }}</li> </ul> </div> <div class="row" ng-if="appointment.employee_id === user.id"> <div class="col-md-6"> <a class="pull-left btn btn-primary" href="#/scheduler/appointment/{{appointment.id}}/edit"><span class="panel-title fa fa-edit"></span> Edit</a> </div> <div class="col-md-6" ng-if="isCancelled"> <button class="btn btn-success pull-right" ng-click="reSched(appointment)"><span class="fa fa-check"></span> Re-schedule</button> </div> <div class="col-md-6" ng-if="!isCancelled"> <button class="btn btn-danger pull-right" ng-click="cancelAppointment(appointment)"><span class="fa fa-remove"></span> Cancel Appointment</button> </div> </div> <div class="row" ng-if="isPending"> <div class="col-md-6"> <button class="btn btn-warning pull-left"><span class="fa fa-remove"></span> Schedule Not Available</button> </div> <div class="col-md-6"> <button class="btn btn-primary pull-right" ng-click="confirmAttendance(appointment)"><span class="fa fa-check"></span> Confirm Attendance</button> </div> </div> <div class="row" ng-if="isCancelledAttendance"> <div class="col-md-6"> </div> <div class="col-md-6"> <button class="btn btn-primary pull-right" ng-click="confirmAttendance(appointment)"><span class="fa fa-check"></span> Confirm Attendance</button> </div> </div> <div class="row" ng-if="isApproved && appointment.status != \'Cancelled\'"> <div class="col-md-12"> <button class="btn btn-danger pull-right" ng-click="cancelAttendance(appointment)"><span class="fa fa-remove"></span> Cancel Attendance</button> </div> </div> <div class="row" ng-if="isApproved && appointment.status === \'Cancelled\'"> <div class="col-md-12"> <button disabled class="btn btn-danger pull-right" ng-click="cancelAttendance(appointment)"><span class="fa fa-remove"></span> Cancel Attendance</button> </div> </div> </div>'),a.put("views/appointments.html",'<div class="container"> <div class="col-sm-6"> <h3>Today\'s Schedule, {{ currentDate | date : \'MMMM d, yyyy\' }}</h3> <div class="panel panel-default row" ng-repeat="present in presentAppointments"> <div class="panel-heading"> <div class="panel-title"> {{ formatTime(present.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(present.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} </div> </div> <div class="panel-body col-sm-12"> <div class="row"> <div class="col-sm-6"> <p><label>Subject:</label> {{ present.subject }}</p> <p><label>Time:</label> {{ formatTime(present.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(present.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ present.venue }}</p> <p><label>Set by:</label> {{ present.employee.first_name }} {{ present.employee.last_name }}</p> </div> <div class="col-sm-6"> <p><label>Meeting Personnel:</label></p> <ul> <li ng-repeat="emp in present.employees">{{ emp.first_name }} {{ emp.last_name }}</li> </ul> <p><label>Notes:</label> {{ present.notes }}</p> </div> </div> <div class="row"> <div class="col-sm-12"> <p><a href="#/scheduler/appointment/{{present.id}}/details">See Details >></a></p> </div> </div> </div> </div> </div> <div class="col-sm-6"> <h3>Scheduled Appointments</h3> <div class="panel panel-default row" ng-repeat="appointment in appointments"> <div class="panel-heading"> <div class="panel-title"> {{ appointment.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body col-sm-12"> <div class="row"> <div class="col-sm-6"> <p><label>Subject:</label> {{ appointment.subject }}</p> <p><label>Time:</label> {{ formatTime(appointment.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(appointment.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ appointment.venue }}</p> <p><label>Set by:</label> {{ appointment.employee.first_name }} {{ appointment.employee.last_name }}</p> </div> <div class="col-sm-6"> <p><label>Meeting Personnel:</label></p> <ul> <li ng-repeat="emp in appointment.employees">{{ emp.first_name }} {{ emp.last_name }}</li> </ul> <p><label>Notes:</label> {{ appointment.notes }}</p> </div> </div> <div class="row"> <div class="col-sm-12"> <p><a href="#/scheduler/appointment/{{appointment.id}}/details">See Details >></a></p> </div> </div> </div> </div> </div> </div>'),
a.put("views/approvedAppointments.html",'<div class="container"> <div class="btn-group btn-group-justified" role="group" aria-label="..."> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/scheduled">Scheduled <span class="badge">{{ scheduledCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/pending">Pending <span class="badge">{{ pendingCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-primary" href="#/scheduler/appointments/my-appointments/approved">Approved <span class="badge">{{ approvedCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/requested">Requested <span class="badge">{{ requestsCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/cancelled">Cancelled <span class="badge">{{ cancelledCount }}</span> </a> </div> </div> <div class="col-sm-6"> <h3>Approved Appointments</h3> <p ng-if="approvedCount <= 0"><i>No approved appointments.</i></p> <div class="panel panel-default row" ng-repeat="invitation in approvedAppointments"> <div class="panel-heading"> <div class="panel-title"> {{ invitation.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body col-sm-12"> <div class="row"> <div class="col-sm-6"> <p><label>Subject:</label> {{ invitation.subject }}</p> <p><label>Time:</label> {{ formatTime(invitation.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(invitation.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ invitation.venue }}</p> <p ng-init="getEmp(invitation.employee_id)"><label>Set by:</label> {{ employee.first_name }} {{ employee.last_name }}</p> <p><label>Status:</label> Scheduled</p> </div> <div class="col-sm-6"> <p><label>Meeting Personnel:</label></p> <ul ng-init="getEmps(invitation.id)"> <li ng-repeat="emp in emps">{{ emp.first_name }} {{ emp.last_name }}</li> </ul> <p><label>Notes:</label> {{ invitation.notes }}</p> </div> </div> <div class="row"> <div class="col-sm-12"> <p><a href="#/scheduler/appointment/{{invitation.id}}/details">See Details >></a></p> </div> </div> <div class="row"> <div class="col-sm-12"> <button class="btn btn-danger text-center col-xs-12 btn-confirm" ng-click="cancelAttendance(invitation)"><span class="fa fa-remove"></span> Cancel Attendance</button> </div> </div> </div> </div> </div> </div>'),a.put("views/auth.html",'<div class="container"> <div class="col-sm-2"></div> <div class="col-sm-8"> <div class="well"> <h4>Sign In</h4> <flash-message></flash-message> <form class="form-horizontal"> <div class="form-group"> <label class="col-xs-3 control-label">Employee No.</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Employee Number" ng-model="loginData.emp_num"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Password</label> <div class="col-xs-9"> <input type="password" class="form-control" placeholder="Password" ng-model="loginData.password"> </div> </div> <div class="form-group"> <div class="col-xs-3"></div> <div class="col-xs-9"> <button class="btn btn-primary pull-right" ng-click="login()"> <span class="fa fa-sign-in"></span> Sign In </button> </div> </div> </form> </div> </div> <div class="col-sm-2"></div> </div>'),a.put("views/calendar.html",'<div class="container"> <h3 class="text-center">Appointment Schedule</h3> <div id="fullcalendar" ui-calendar="uiConfig.calendar" ng-model="eventSources"></div> </div>'),a.put("views/cancelledAppointments.html",'<div class="container"> <div class="btn-group btn-group-justified" role="group" aria-label="..."> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/scheduled">Scheduled <span class="badge">{{ scheduledCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/pending">Pending <span class="badge">{{ pendingCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/approved">Approved <span class="badge">{{ approvedCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/requested">Requested <span class="badge">{{ requestsCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-primary" href="#/scheduler/appointments/my-appointments/cancelled">Cancelled <span class="badge">{{ cancelledCount }}</span> </a> </div> </div> <div class="col-sm-6"> <h3>Cancelled Appointments</h3> <p ng-if="cancelledCount <= 0"><i>No cancelled appointments.</i></p> <div class="panel panel-default row" ng-repeat="invitation in cancelledAppointments"> <div class="panel-heading"> <div class="panel-title"> {{ invitation.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body col-sm-12"> <div class="row"> <div class="col-sm-6"> <p><label>Subject:</label> {{ invitation.subject }}</p> <p><label>Time:</label> {{ formatTime(invitation.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(invitation.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ invitation.venue }}</p> <p ng-init="getEmp(invitation.employee_id)"><label>Set by:</label> {{ employee.first_name }} {{ employee.last_name }}</p> </div> <div class="col-sm-6"> <p><label>Meeting Personnel:</label></p> <ul ng-init="getEmps(invitation.id)"> <li ng-repeat="emp in emps">{{ emp.first_name }} {{ emp.last_name }}</li> </ul> <p><label>Notes:</label> {{ invitation.notes }}</p> </div> </div> <div class="row"> <div class="col-sm-12"> <p><a href="#/scheduler/appointment/{{invitation.id}}/details">See Details >></a></p> </div> </div> <div class="row"> <div class="col-sm-12"> <button ng-if="invitation.employee.id === currentUser.id" class="btn btn-success text-center col-xs-12 btn-confirm" ng-click="reSched(invitation)"><span class="fa fa-check"></span> Re-schedule</button> </div> </div> </div> </div> </div> <div class="col-sm-6"> <h3>Cancelled Attendance</h3> <p ng-if="cancelledApprovalCount <= 0"><i></i></p> <div class="panel panel-default row" ng-repeat="cancelledApproval in cancelledApproval"> <div class="panel-heading"> <div class="panel-title"> {{ cancelledApproval.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body col-sm-12"> <div class="row"> <div class="col-sm-6"> <p><label>Subject:</label> {{ cancelledApproval.subject }}</p> <p><label>Time:</label> {{ formatTime(cancelledApproval.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(cancelledApproval.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ cancelledApproval.venue }}</p> <p ng-init="getEmp(cancelledApproval.employee_id)"><label>Set by:</label> {{ employee.first_name }} {{ employee.last_name }}</p> </div> <div class="col-sm-6"> <p><label>Meeting Personnel:</label></p> <ul ng-init="getEmps(cancelledApproval.id)"> <li ng-repeat="emp in emps">{{ emp.first_name }} {{ emp.last_name }}</li> </ul> <p><label>Notes:</label> {{ cancelledApproval.notes }}</p> </div> </div> <div class="row"> <div class="col-sm-12"> <p><a href="#/scheduler/appointment/{{cancelledApproval.id}}/details">See Details >></a></p> </div> </div> <div class="row"> <div class="col-sm-12"> <button class="btn btn-success text-center col-xs-12 btn-confirm" ng-click="confirmAttendance(cancelledApproval)"><span class="fa fa-check"></span> Confirm Attendance</button> </div> </div> </div> </div> </div> </div>'),a.put("views/editAppointment.html",'<div class="container"> <h3 class="text-center">Edit Appointment</h3> <flash-message></flash-message> <form role="form"> <div class="form-group"> <label for="subject">Subject:</label> <input type="text" class="form-control" id="subject" ng-model="appointment.subject"> </div> <div class="form-group"> <!-- <label>Select Personnel:</label>\n            <div\n              isteven-multi-select\n              input-model="employees"\n              output-model="selectedEmps"\n              button-label="first_name last_name"\n              item-label="first_name last_name"\n              tick-property="ticked"\n            ></div> --> </div> <div class="form-group"> <label>Meeting Personnel:</label> <ul class="list-group"> <li class="list-group-item" ng-repeat="emp in selectedEmps"> {{ emp.first_name }} {{ emp.last_name }} <span class="pull-right">{{ emp.department.name }}</span> </li> </ul> </div> <div class="form-group"> <label for="date">Date:</label> <input type="date" class="form-control" id="date" ng-model="formattedDate"> </div> <label for="start">Time:</label> <div class="form-group row"> <div class="col-md-5"> <div class="col-md-4 text-center"> <uib-timepicker style="display:inline" ng-model="formattedStartTime" hour-step="1" minute-step="5" show-meridian="false"></uib-timepicker> </div> <div class="col-md-1 text-center" style="height:125px;line-height:125px"><span style="display:inline-block;vertical-align:middle">to</span></div> <div class="col-md-4 text-center"> <uib-timepicker style="display:inline" ng-model="formattedEndTime" hour-step="1" minute-step="5" show-meridian="false"></uib-timepicker> </div> </div> </div> <!-- <div class="form-group">\n            <label for="start">Start:</label>\n            <input type="time" class="form-control" id="start" ng-model="formattedStartTime">\n        </div>\n        <div class="form-group">\n            <label for="end">End:</label>\n            <input type="time" class="form-control" id="end" ng-model="formattedEndTime">\n        </div> --> <div class="form-group"> <label for="venue">Venue:</label> <input type="text" class="form-control" id="venue" ng-model="appointment.venue"> </div> <div class="form-group"> <label for="purpose">Purpose:</label> <textarea type="text" class="form-control" id="purpose" ng-model="appointment.purpose"></textarea> </div> <label>Agendas:</label> <div class="input-group"> <input type="text" class="form-control" placeholder="New Agenda" aria-describedby="basic-addon2" ng-model="agenda.description"> <span class="btn input-group-addon btn-success" id="basic-addon2" ng-click="addAgenda()"><span class="glyphicon glyphicon-plus"></span> Add</span> </div> <br> <div class="form-group"> <ul class="list-group" ng-repeat="agenda in agendas"> <li class="list-group-item"> {{ agenda.description }} <span style="cursor:pointer" class="glyphicon glyphicon-remove pull-right text-danger" ng-click="removeAgenda($index)"></span> </li> </ul> </div> <div class="form-group"> <label for="notes">Notes:</label> <textarea type="text" class="form-control" id="notes" ng-model="appointment.notes"></textarea> </div> <button type="submit" class="btn btn-primary pull-right" ng-click="update()"><span class="fa fa-check"></span> Save</button> <br> </form> <br> </div>'),a.put("views/editEmp.html",'<div class="container"> <div class="col-sm-2"></div> <div class="col-sm-8"> <div class="well"> <h4>Edit Employee</h4> <flash-message></flash-message> <form class="form-horizontal"> <div class="form-group"> <label class="col-xs-3 control-label">Employee No.</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Employee number" ng-model="emp.emp_num"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">First Name</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="First Name" ng-model="emp.first_name"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Middle Name</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Middle Name" ng-model="emp.middle_name"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Last Name</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Middle Name" ng-model="emp.last_name"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Suffix</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Jr/Sr/I/II/etc" ng-model="emp.suffix"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Email</label> <div class="col-xs-9"> <input type="email" class="form-control" placeholder="Email Address" ng-model="emp.email"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Department</label> <div class="col-xs-9"> <select class="form-control" placeholder="Select Department" ng-options="department as department.name for department in departments track by department.id" ng-model="emp.department"></select> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Level</label> <div class="col-xs-9"> <select class="form-control" placeholder="Select Position Level" ng-options="level as level.description for level in levels track by level.id" ng-model="emp.level"></select> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Position</label> <div class="col-xs-9"> <select class="form-control" placeholder="Select Position" ng-options="position as position.title for position in positions track by position.id" ng-model="emp.position"></select> </div> </div> <div class="form-group"> <div class="col-xs-3"></div> <div class="col-xs-9"> <button class="btn btn-primary pull-right" ng-click="update()"> <span class="fa fa-user"></span> Update </button> </div> </div> </form> </div> </div> <div class="col-sm-2"></div> </div>'),a.put("views/employeeModal.html",'<form class="form-horizontal"> <div class="modal-header"> <h3 class="modal-title">Add an Employee to Meeting</h3> </div> <div class="modal-body"> <select chosen id="emp" class="form-control" placeholder="Select an Employee" ng-model="selectedEmp" ng-options="selectedEmp as selectedEmp.first_name for selectedEmp in employees track by selectedEmp.id" ng-change="addEmp(selectedEmp)"></select> Selected: <ul> <li ng-repeat="emp in storedSelectedEmps track by emp.id"> {{ emp.first_name }} {{ emp.last_name }} </li> </ul> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="addEmp()">Add</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button> </div> </form>'),a.put("views/emps.html",'<div class="container"> <flash-message></flash-message> <h4>List of Employees</h4><a ng-href="/#/employees/add"><span class="fa fa-plus"></span> Add</a> <table class="table"> <thead> <tr> <th>Employee No.</th> <th>Name</th> <th>Department</th> <th>Level</th> <th>Position</th> <th>Email Address</th> <th></th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="emp in employees"> <td>{{ emp.emp_num }}</td> <td>{{ emp.first_name }} {{ emp.last_name}}</td> <td>{{ emp.department.name }}</td> <td>{{ emp.level.description }}</td> <td>{{ emp.position.title }}</td> <td>{{ emp.email }}</td> <td><a class="btn btn-primary btn-sm" ng-href="/#/employees/{{emp.id}}/edit">Edit</a></td> <td><span class="btn btn-danger btn-sm" ng-click="delete(emp.id)">Delete</span></td> </tr> </tbody> </table> </div>'),a.put("views/main.html",""),a.put("views/myappointments.html",'<div class="container"> <div class="col-sm-4"> <h3>Pending Appointments</h3> <div class="panel panel-default" ng-repeat="invitation in pendingInvitations"> <div class="panel-heading"> <div class="panel-title"> {{ invitation.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body"> <p><label>Subject:</label> {{ invitation.subject }}</p> <p><label>Time:</label> {{ formatTime(invitation.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(invitation.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ invitation.venue }}</p> <p ng-init="getEmp(invitation.employee_id)"><label>Set by:</label> {{ set_by.first_name }} {{ set_by.last_name }}</p> <p><a href="#/scheduler/appointment/{{invitation.id}}/details">See Details >></a></p> <button class="btn btn-primary text-center col-xs-12 btn-confirm" ng-click="confirmAttendance(invitation)"><span class="fa fa-check"></span> Confirm Attendance</button> <button class="btn btn-warning text-center col-xs-12 btn-confirm"><span class="fa fa-remove"></span> Schedule Not Available</button> </div> </div> </div> <div class="col-sm-4"> <h3>Approved Appointments</h3> <div class="panel panel-default" ng-repeat="invitation in approvedAppointments"> <div class="panel-heading"> <div class="panel-title"> {{ invitation.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body"> <p><label>Subject:</label> {{ invitation.subject }}</p> <p><label>Time:</label> {{ formatTime(invitation.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(invitation.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ invitation.venue }}</p> <p ng-init="getEmp(invitation.employee_id)"><label>Set by:</label> {{ set_by.first_name }} {{ set_by.last_name }}</p> <p><a href="#/scheduler/appointment/{{invitation.id}}/details">See Details >></a></p> <button class="btn btn-danger text-center col-xs-12 btn-confirm" ng-click="cancelAppointment(invitation)"><span class="fa fa-remove"></span> Cancel Appointment</button> </div> </div> </div> <div class="col-sm-4"> <h3>Requested Appointments</h3> <div class="panel panel-default" ng-repeat="request in requests"> <div class="panel-heading"> <div class="panel-title"> {{ request.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body"> <p><label>Subject:</label> {{ request.subject }}</p> <p><label>Time:</label> {{ formatTime(request.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(request.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ request.venue }}</p> <p ng-init="getEmp(request.employee_id)"><label>Set by:</label> {{ set_by.first_name }} {{ set_by.last_name }}</p> <p><a href="#/scheduler/appointment/{{request.id}}/details">See Details >></a></p> </div> </div> </div> </div>'),a.put("views/pendingAppointments.html",'<div class="container"> <div class="btn-group btn-group-justified" role="group" aria-label="..."> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/scheduled">Scheduled <span class="badge">{{ scheduledCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-primary" href="#/scheduler/appointments/my-appointments/pending">Pending <span class="badge">{{ pendingCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/approved">Approved <span class="badge">{{ approvedCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/requested">Requested <span class="badge">{{ requestsCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/cancelled">Cancelled <span class="badge">{{ cancelledCount }}</span> </a> </div> </div> <div class="col-sm-6"> <h3>Pending Appointments</h3> <p ng-if="pendingCount <= 0"><i>No pending appointments.</i></p> <div class="panel panel-default row" ng-repeat="invitation in pendingInvitations"> <div class="panel-heading"> <div class="panel-title"> {{ invitation.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body col-sm-12"> <div class="row"> <div class="col-sm-6"> <p><label>Subject:</label> {{ invitation.subject }}</p> <p><label>Time:</label> {{ formatTime(invitation.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(invitation.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ invitation.venue }}</p> <p ng-init="getEmp(invitation.employee_id)"><label>Set by:</label> {{ employee.first_name }} {{ employee.last_name }}</p> <p><label>Status:</label> Pending</p> </div> <div class="col-sm-6"> <p><label>Meeting Personnel:</label></p> <ul ng-init="getEmps(invitation.id)"> <li ng-repeat="emp in emps">{{ emp.first_name }} {{ emp.last_name }}</li> </ul> <p><label>Notes:</label> {{ invitation.notes }}</p> </div> </div> <div class="row"> <div class="col-sm-12"> <p><a href="#/scheduler/appointment/{{invitation.id}}/details">See Details >></a></p> </div> </div> <div class="row"> <button class="btn btn-primary text-center col-sm-12 btn-confirm" ng-click="confirmAttendance(invitation)"><span class="fa fa-check"></span> Confirm Attendance</button> <button class="btn btn-warning text-center col-sm-12 btn-confirm" ng-click="notAvailable(invitation)"><span class="fa fa-remove"></span> Schedule Not Available</button> </div> </div> </div> </div> </div>'),a.put("views/register.html",'<div class="container"> <div class="col-sm-2"></div> <div class="col-sm-8"> <div class="well"> <h4>Register</h4> <flash-message></flash-message> <form class="form-horizontal"> <div class="form-group"> <label class="col-xs-3 control-label">Employee No.</label> <div class="col-xs-9"> <input type="text" class="form-control" placeholder="Employee number" ng-model="user.emp_num"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Password</label> <div class="col-xs-9"> <input type="password" class="form-control" placeholder="Password" ng-model="user.password"> </div> </div> <div class="form-group"> <label class="col-xs-3 control-label">Re-type Password</label> <div class="col-xs-9"> <input type="password" class="form-control" placeholder="Password Confirmation" ng-model="user.password_confirmation"> </div> </div> <div class="form-group"> <div class="col-xs-3"></div> <div class="col-xs-9"> <button class="btn btn-primary pull-right" ng-click="register()"> <span class="fa fa-user"></span> Sign Up </button> </div> </div> </form> </div> </div> <div class="col-sm-2"></div> </div>'),a.put("views/requestedAppointments.html",'<div class="container"> <div class="btn-group btn-group-justified" role="group" aria-label="..."> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/scheduled">Scheduled <span class="badge">{{ scheduledCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/pending">Pending <span class="badge">{{ pendingCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/approved">Approved <span class="badge">{{ approvedCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-primary" href="#/scheduler/appointments/my-appointments/requested">Requested <span class="badge">{{ requestsCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/cancelled">Cancelled <span class="badge">{{ cancelledCount }}</span> </a> </div> </div> <div class="col-sm-6"> <h3>Requested Appointments</h3> <p ng-if="requestsCount <= 0"><i>No appointment requests.</i></p> <div class="panel panel-default row" ng-repeat="request in requests"> <div class="panel-heading"> <div class="panel-title"> {{ request.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body col-sm-12"> <div class="row"> <div class="col-sm-6"> <p><label>Subject:</label> {{ request.subject }}</p> <p><label>Time:</label> {{ formatTime(request.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(request.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ request.venue }}</p> <p ng-init="getEmp(request.employee_id)"><label>Set by:</label> {{ employee.first_name }} {{ employee.last_name }}</p> <p><label>Status:</label> {{ request.status }}</p> </div> <div class="col-sm-6"> <p><label>Meeting Personnel:</label></p> <ul ng-init="getEmps(request.id)"> <li ng-repeat="emp in emps">{{ emp.first_name }} {{ emp.last_name }}</li> </ul> <p><label>Notes:</label> {{ request.notes }}</p> </div> </div> <div class="row"> <div class="col-sm-12"> <p><a href="#/scheduler/appointment/{{request.id}}/details">See Details >></a></p> </div> </div> <div class="row"> <div class="col-sm-12"> <button ng-if="request.status != \'Cancelled\'" class="btn btn-danger text-center col-xs-12 btn-confirm" ng-click="cancelAppointment(request)"><span class="fa fa-remove"></span> Cancel Appointment</button> <button ng-if="request.status === \'Cancelled\'" class="btn btn-success text-center col-xs-12" ng-click="reSched(request)"><span class="fa fa-check"></span> Re-schedule</button> </div> </div> </div> </div> </div></div>'),a.put("views/scheduledAppointments.html",'<div class="container"> <div class="btn-group btn-group-justified" role="group" aria-label="..."> <div class="btn-group" role="group"> <a type="button" class="btn btn-primary" href="#/scheduler/appointments/my-appointments/scheduled">Scheduled <span class="badge">{{ scheduledCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/pending">Pending <span class="badge">{{ pendingCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/approved">Approved <span class="badge">{{ approvedCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/requested">Requested <span class="badge">{{ requestsCount }}</span> </a> </div> <div class="btn-group" role="group"> <a type="button" class="btn btn-default" href="#/scheduler/appointments/my-appointments/cancelled">Cancelled <span class="badge">{{ cancelledCount }}</span> </a> </div> </div> <div class="col-sm-6"> <h3>Scheduled Appointments</h3> <p ng-if="scheduledCount <= 0"><i>No appointment has been scheduled yet.</i></p> <div class="panel panel-default row" ng-repeat="schedule in scheduledAppointments"> <div class="panel-heading"> <div class="panel-title"> {{ schedule.set_date | date : \'MMMM d, yyyy\' }} </div> </div> <div class="panel-body col-sm-12"> <div class="row"> <div class="col-sm-6"> <p><label>Subject:</label> {{ schedule.subject }}</p> <p><label>Time:</label> {{ formatTime(schedule.start_time) | date : \'HH:mm a\' : \'UTC+08:00\' }} - {{ formatTime(schedule.end_time) | date : \'HH:mm a\' : \'UTC+08:00\' }}</p> <p><label>Venue:</label> {{ schedule.venue }}</p> <p ng-init="getEmp(schedule.employee_id)"><label>Set by:</label> {{ employee.first_name }} {{ employee.last_name }}</p> <p><label>Status:</label> Scheduled</p> </div> <div class="col-sm-6"> <p><label>Meeting Personnel:</label></p> <ul ng-init="getEmps(schedule.id)"> <li ng-repeat="emp in emps">{{ emp.first_name }} {{ emp.last_name }}</li> </ul> <p><label>Notes:</label> {{ schedule.notes }}</p> </div> </div> <div class="row"> <div class="col-sm-12"> <p><a href="#/scheduler/appointment/{{schedule.id}}/details">See Details >></a></p> </div> </div> <div class="row"> <div class="col-sm-12"> <button class="btn btn-danger text-center col-xs-12 btn-confirm" ng-click="cancelAppointment(schedule)"><span class="fa fa-remove"></span> Cancel Appointment</button> </div> </div> </div> </div> </div> </div>'),a.put("views/scheduler.html",'<div class="container"> <div class="col-md-6"> <h3 class="text-center">Appointment Calendar</h3> <div id="fullcalendar" ui-calendar="uiConfig.calendar" ng-model="eventSources"></div> </div> <div class="col-md-6"> <h3 class="text-center">Schedule Appointment</h3> <form role="form"> <div class="form-group"> <label for="subject">Subject:</label> <input type="text" class="form-control" id="subject" ng-model="subject"> </div> <div class="form-group"> <label>Select Personnel:</label> <!-- <select  class="form-control" placeholder="Select an Employee" name="multipleSelect" id="multipleSelect"\n                    ng-options="selectedEmp as selectedEmp.first_name.concat(\' \' + selectedEmp.last_name) for selectedEmp in employees track by selectedEmp.id"\n                    ng-model="selectedEmps" ng-change="syncEmps()" options="{ allowClear: true }" multiple></select> --> <!-- <li class="list-group-item">\n            <input type="checkbox" ng-model="master" ng-click="selectAll(master)"> Check All</input>\n          </li>\n          <li class="list-group-item" ng-repeat="emp in employees">\n            <input type="checkbox" ng-checked="master" ng-model="selected" ng-change="syncEmps(selected, emp, index)"> {{emp.first_name}} {{emp.last_name}} <span class="pull-right">{{ emp.department.name }}</span></input>\n          </li> --> <div isteven-multi-select input-model="employees" output-model="selectedEmps" button-label="first_name last_name" item-label="first_name last_name" tick-property="ticked"></div> </div> <div class="form-group"> <label for="date">Date:</label> <input type="date" class="form-control" id="date" ng-model="set_date"> </div> <label for="start">Time:</label> <div class="form-group row"> <div class="col-md-9"> <div class="col-md-4 text-center"> <uib-timepicker style="display:inline;width:75px" ng-model="start_time" hour-step="1" minute-step="5" show-meridian="false"></uib-timepicker> </div> <div class="col-md-1 text-center" style="height:125px;line-height:125px"><span style="display:inline-block;vertical-align:middle">to</span></div> <div class="col-md-4 text-center"> <uib-timepicker style="display:inline" ng-model="end_time" hour-step="1" minute-step="5" show-meridian="false"></uib-timepicker> </div> </div> </div> <div class="form-group"> <label for="venue">Venue:</label> <input type="text" class="form-control" id="venue" ng-model="venue"> </div> <div class="form-group"> <label for="purpose">Purpose:</label> <textarea type="text" class="form-control" id="purpose" ng-model="purpose"></textarea> </div> <label>Agendas:</label> <div class="input-group"> <input value="" type="text" class="form-control" placeholder="New Agenda" aria-describedby="basic-addon2" ng-model="agenda.description"> <span class="btn input-group-addon btn-success" id="basic-addon2" ng-click="addAgenda()"><span class="glyphicon glyphicon-plus"></span> Add</span> </div> <br> <div class="form-group"> <ul class="list-group" ng-repeat="agenda in agendas"> <li class="list-group-item"> {{ agenda.description }} <span style="cursor:pointer" class="glyphicon glyphicon-remove pull-right text-danger" ng-click="removeAgenda($index)"></span> </li> </ul> </div> <div class="form-group"> <label for="notes">Notes:</label> <textarea type="text" class="form-control" id="notes" ng-model="notes"></textarea> </div> <div class="row"> <div class="col-md-6"> <flash-message></flash-message> </div> <div class="col-md-6"> <button type="submit" class="btn btn-primary pull-right" ng-click="schedule()">Set Appointment</button> </div> </div> <br> </form> </div> <br> </div>'),a.put("views/transactions.html","<div class=\"container\"> <h4>Scheduling Transactions</h4> <table class=\"table\"> <thead> <tr> <th>Subject</th> <th>Date</th> <th>Time</th> <th>Set By</th> <th>Status</th> <th>Updated At</th> </tr> </thead> <tbody> <tr ng-repeat=\"appointment in appointments\"> <td><a style=\"text-decoration:none\" href=\"#/scheduler/appointment/{{appointment.id}}/details\">{{ appointment.subject }}</a></td> <td>{{ appointment.set_date | date : 'MMMM d, yyyy' }}</td> <td>{{ formatTime(appointment.start_time) | date : 'HH:mm a' : 'UTC+08:00' }} - {{ formatTime(appointment.end_time) | date : 'HH:mm a' : 'UTC+08:00' }}</td> <td>{{ appointment.employee.first_name }} {{ appointment.employee.last_name }}</td> <td>{{ appointment.status }}</td> <td>{{ appointment.updated_at }}</td> </tr> </tbody> </table> </div>");
}]);